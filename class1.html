<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resource Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="class1.css">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-archive user-icon"></i>
                <h2 class="sidebar-title">Resource Portal</h2>
            </div>
            <nav class="sidebar-menu">
                <a href="page1.html" class="menu-item active">
                    <i class="fas fa-th-large"></i> Dashboard
                </a>
                <h3>Venues</h3>
                <a href="class2.html" class="menu-item">
                    <i class="fas fa-chalkboard"></i> Classrooms
                </a>
                <a href="lab.html" class="menu-item">
                    <i class="fas fa-flask"></i> Labs
                </a>
                <a href="seminar.html" class="menu-item">
                    <i class="fas fa-door-open"></i> Seminar Halls
                </a>
                <a href="audi.html" class="menu-item">
                    <i class="fas fa-building"></i> Auditorium
                </a>
                <a href="emergency.html" class="menu-item">
                    <i class="fas fa-exclamation-triangle"></i> Emergency
                </a>
                <h3>Other</h3>
                <a href="login.html" class="menu-item">
                    <i class="fas fa-sign-out-alt"></i> Log out
                </a>
            </nav>
        </div>

        <!-- Main content -->
        <div class="main-content">
            <header class="header">
                <h1>Welcome Back</h1>
                <div class="profile-icon">D</div>
            </header>
            <section class="venues">
                <h2>Classroom Status</h2>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>S.No</th>
                                <th>Venue</th>
                                <th>Year</th>
                                <th>Department</th>
                                <th>Date</th>
                                <th>Time</th>
                                <th>Subject</th>
                                <th>Status</th>
                                <th>Remarks</th>
                                <th>Apply Proof</th> <!-- New column header -->
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>WW-106</td>
                                <td>II</td>
                                <td>AIDS</td>
                                <td>22/04/24</td>
                                <td>08.45 - 09.45 AM</td>
                                <td>Web Technology</td>
                                <td><span class="status approved">Approved</span></td>
                                <td>NA</td>
                                <td><button class="apply-proof-btn" onclick="openProofModal('22/04/24')">Apply Proof</button></td> <!-- Pass date -->
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>EW-115</td>
                                <td>III</td>
                                <td>CSE</td>
                                <td>22/04/24</td>
                                <td>01.45 - 02.45 PM</td>
                                <td>Computer Networks </td>
                                <td><span class="status rejected">Rejected</span></td>
                                <td>Leave</td>
                                <td><button class="apply-proof-btn" onclick="openProofModal('22/04/24')">Apply Proof</button></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>ME-201</td>
                                <td>III</td>
                                <td>ISE</td>
                                <td>25/04/24</td>
                                <td>10.35 - 11.25 AM</td>
                                <td>Machine Learning</td>
                                <td><span class="status initiated">Initiated</span></td>
                                <td>-</td>
                                <td><button class="apply-proof-btn" onclick="openProofModal('25/04/24')">Apply Proof</button></td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>SF-102</td>
                                <td>II</td>
                                <td>IT</td>
                                <td>25/04/24</td>
                                <td>03.30 - 04.30 PM</td>
                                <td>DBMS</td>
                                <td><span class="status approved">Approved</span></td>
                                <td>NA</td>
                                <td><button class="apply-proof-btn" onclick="openProofModal('25/04/24')">Apply Proof</button></td>
                            </tr>             
                        </tbody>
                    </table>
                </div>                
                <div class="modal-overlay" id="modalOverlay"></div>
                <div class="proof-modal" id="proofModal">
                    <div class="modal-header">
                        Upload Proof
                        <span class="modal-close" onclick="closeProofModal()">Ã—</span>
                    </div>
                    <form id="proofForm">
                        <input type="file" id="proofFile" name="proofFile" accept="image/*" required>
                        <br>
                        <button type="submit">Submit</button>
                    </form>
                </div>
                
                <script>
                    function openProofModal(date) {
                        document.getElementById('proofModal').style.display = 'block';
                        document.getElementById('modalOverlay').style.display = 'block';
                
                        // Set the file input attribute to accept images with the date as a part of the file name
                        const proofFileInput = document.getElementById('proofFile');
                        proofFileInput.setAttribute('data-date', date); // Storing the date in a data attribute
                    }
                
                    function closeProofModal() {
                        document.getElementById('proofModal').style.display = 'none';
                        document.getElementById('modalOverlay').style.display = 'none';
                    }
                
                    document.getElementById('proofForm').addEventListener('submit', function (e) {
                        e.preventDefault();
                
                        const proofFileInput = document.getElementById('proofFile');
                        const date = proofFileInput.getAttribute('data-date');
                
                        const file = proofFileInput.files[0];
                        if (file) {
                            const fileName = `${date}_${file.name}`; // Append date to the filename
                            console.log('File uploaded with name:', fileName);
                            // Proceed with the upload logic
                        }
                
                        closeProofModal();
                    });
                </script>
                
                </body>
                </html>
